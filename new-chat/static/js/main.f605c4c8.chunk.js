(this["webpackJsonpnew-chat"]=this["webpackJsonpnew-chat"]||[]).push([[0],Array(43).concat([function(e,a,t){},,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),s=t(11),r=t.n(s);var l=t(4),i=t(1),o=t(74);t(43);var m=function(){var e=Object(l.f)().id,a=Object(i.c)((function(a){return a.contacts.items.find((function(a){return a._id===e}))}));return c.a.createElement("div",{className:"info-contact"},c.a.createElement("div",{className:"big-avatar"},null===a||void 0===a?void 0:a.fullname[0]),c.a.createElement("div",{className:"info-fullname"},null===a||void 0===a?void 0:a.fullname),c.a.createElement("div",{className:"nickname"},"@",null===a||void 0===a?void 0:a.username),c.a.createElement("div",{className:"connect"},c.a.createElement("span",{className:"material-icons icons-connect call"},"call"),c.a.createElement("span",{className:"material-icons icons-connect videocam"},"videocam"),c.a.createElement("span",{className:"material-icons icons-connect email"},"email")))};t(45);var u=function(){var e,a,t,n=Object(l.f)().id,s=Object(i.c)((function(e){return e.contacts.items.find((function(e){return e._id===n}))}));return c.a.createElement("div",{className:"info-bar"},c.a.createElement("div",{className:"inner-info-bar"},c.a.createElement(m,null),c.a.createElement("div",{className:"social-block"},c.a.createElement("div",{className:"social"},"Social"),c.a.createElement("div",{className:"messengers"},(null===s||void 0===s||null===(e=s.socials)||void 0===e?void 0:e.instagram)&&c.a.createElement("div",{className:"instagram"},c.a.createElement("i",{className:"ico fab fa-instagram"}),c.a.createElement("span",{className:"nick-messenger"},s.socials.instagram)),(null===s||void 0===s||null===(a=s.socials)||void 0===a?void 0:a.twitter)&&c.a.createElement("div",{className:"twitter"},c.a.createElement("i",{className:"ico fab fa-twitter"}),c.a.createElement("span",{className:"nick-messenger"},s.socials.twitter)),(null===s||void 0===s||null===(t=s.socials)||void 0===t?void 0:t.facebook)&&c.a.createElement("div",{className:"facebook"},c.a.createElement("i",{className:"ico fab fa-facebook-f"}),c.a.createElement("span",{className:"nick-messenger"},s.socials.facebook))))))};var d=function(){var e=Object(i.c)((function(e){return e.chat.showBar}));return c.a.createElement(o.a,{in:e,timeout:500,unmountOnExit:!0},c.a.createElement(u,null))};t(46);function f(){var e=document.getElementById("chat");e.scrollTop=e.scrollHeight}t(47);var v=function(){var e=Object(i.c)((function(e){return e.chat.showSearch})),a=Object(i.c)((function(e){return e.chat.searchLine})),t=Object(i.b)();return c.a.createElement(c.a.Fragment,null,e&&c.a.createElement("input",{className:"search-message-input",onChange:function(e){return t({type:"search/line",payload:e.target.value})},value:a}),a.trim().length>0&&c.a.createElement("span",{className:"clear-input material-icons",onClick:function(){return t({type:"input/clear"})}},"close"))};var h=function(){var e=Object(i.b)();return c.a.createElement("div",{className:"search-message"},c.a.createElement("span",{className:"icon-search-chat material-icons",onClick:function(){return e({type:"search/show"})}},"search"),c.a.createElement("div",{className:"header-input-container"},c.a.createElement(v,null)))},E=t(32),p=t(33);t(48);var b=function(){var e=Object(i.b)(),a=Object(n.useState)(null),t=Object(E.a)(a,2),s=t[0],r=t[1],l=Object(i.c)((function(e){return e.chat.showBar}));return Object(p.a)("shift+p",(function(){return e(l())})),c.a.createElement("div",{className:"setting"},c.a.createElement("a",{className:"github-link",href:"https://github.com/Amazaev77/new-chat"},c.a.createElement("i",{className:"github fab fa-github"})),c.a.createElement("span",{className:"setting-span material-icons ".concat(s),onClick:function(){r(l?"setting-rotate":"setting-rotate-back"),e({type:"bar/show"})}},"settings"))};t(49);var g=function(){var e=Object(i.c)((function(e){return e.chat.loading})),a=Object(l.f)().id,t=Object(i.c)((function(e){return e.contacts.items.find((function(e){return e._id===a}))}));return c.a.createElement("div",{className:"fullname"},c.a.createElement("div",{className:"name-container"},c.a.createElement("div",{className:"name-chat"},e?c.a.createElement("div",{className:"updating-box"},c.a.createElement("div",{className:"autorenew-box"},c.a.createElement("span",{className:"autorenew material-icons"},"autorenew")),c.a.createElement("div",{className:"updating"},"Updating...")):null===t||void 0===t?void 0:t.fullname),(null===t||void 0===t?void 0:t.online)&&c.a.createElement("div",{className:"online-chat"})))};t(50);var N=function(){return c.a.createElement("div",{className:"header"},c.a.createElement(h,null),c.a.createElement(g,null),c.a.createElement(b,null))},j=t(12),O=t.n(j);t(51);var y=function(e){var a=e.message,t=Object(l.f)().id,n=Object(i.c)((function(e){return e.contacts.items.find((function(e){return e._id===t}))}));return c.a.createElement("div",{className:"message-in-box"},c.a.createElement("div",{className:"inner-message-in"},c.a.createElement("div",{className:"avatar-chat"},n.fullname[0]),c.a.createElement("div",{className:"message-in"},a.content,c.a.createElement("div",{className:"in-time"},O()(a.time).format("HH:mm")))))};t(52);var w=function(e){var a=e.message;return c.a.createElement("div",{className:"message-out-box"},c.a.createElement("div",{className:"message-out"},a.content),c.a.createElement("div",{className:"out-time-box"},c.a.createElement("span",{className:"out-time"},O()(a.time).format("HH:mm")),a.read?c.a.createElement("span",{className:"check material-icons"},"done_all"):c.a.createElement("span",{className:"check material-icons"},"done")))};t(53);var k=function(e){var a=e.message;return"info"!==a.type?null:c.a.createElement("div",{className:"message-info"},a.content)};t(54);var C=function(e){var a=e.message,t=Object(i.c)((function(e){return e.profile._id}));return"info"===a.type?c.a.createElement(k,{message:a}):t===a.toUserId?c.a.createElement(y,{message:a}):c.a.createElement(w,{message:a})};t(55);var L=function(){var e=Object(i.c)((function(e){var a=e.chat.searchLine;return e.chat.messages.filter((function(e){return-1!==e.content.toLowerCase().indexOf(a.toLowerCase())}))}));return Object(i.c)((function(e){return e.chat.loading}))?null:c.a.createElement("div",{className:"chat"},e.map((function(e){return c.a.createElement("div",{key:e._id,className:"message"},c.a.createElement(C,{message:e}))})))};t(56);var _=function(){return""!==Object(i.c)((function(e){return e.chat.messageLine}))?null:c.a.createElement("span",{className:"material-icons"},"mic")};t(57);var x=function(e){var a=e.onSend;return""===Object(i.c)((function(e){return e.chat.messageLine}))?null:c.a.createElement("span",{className:"material-icons",onClick:a},"send")};t(58);var S=function(){var e=Object(i.c)((function(e){return e.chat.messageLine})),a=Object(i.c)((function(e){return e.profile._id})),t=Object(i.b)(),n=Object(l.f)().id,s=function(){t(function(e,a,t){return function(n){n({type:"message/send/start"}),fetch("https://api.intocode.ru:8001/api/messages",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({myId:e,contactId:a,content:t,type:"text"})}).then((function(e){return e.json()})).then((function(e){n({type:"message/send/success",payload:e}),f()}))}}(a,n,e))};return c.a.createElement("div",{className:"footer"},c.a.createElement("div",{className:"footer-inner"},c.a.createElement("input",{className:"send-message-input",placeholder:"Write a message",value:e,onChange:function(e){t({type:"message/write",payload:e.target.value})},onKeyDown:function(e){13===e.keyCode&&s()}}),c.a.createElement("div",{className:"send"},c.a.createElement("span",{className:"clip material-icons"},"attach_file"),c.a.createElement(_,null),c.a.createElement(x,{onSend:s}))))};t(59),t(60);var B=function(){return c.a.createElement("div",{className:"no-selected"},"Please, select a chat to start messaging")};var H=function(){var e=Object(i.b)(),a=Object(i.c)((function(e){return e.profile._id})),t=Object(i.c)((function(e){return e.profile.loading})),s=Object(l.f)().id;return Object(n.useEffect)((function(){var n,c;s&&!t&&(e((n=s,c=a,function(e){e({type:"chat/load/start"}),fetch("https://api.intocode.ru:8001/api/messages/".concat(c,"/").concat(n)).then((function(e){return e.json()})).then((function(a){e({type:"chat/load/success",payload:a})}))})),f())}),[s,a,e,t]),s?t?null:c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"inner-main",id:"chat"},c.a.createElement(N,null),c.a.createElement(L,null),c.a.createElement(S,null))):c.a.createElement(B,null)};t(61);var M=function(e){var a=e.lastMessage;return a?c.a.createElement("div",{className:"last-message"},a.content.length>12?a.content.substring(0,12)+"...":a.content):null},T=(t(62),t(9));t(63);var I=function(e){return e.contact.online?c.a.createElement("div",{className:"online-contact"}):null};var A=function(e){var a,t=e.contact,n=O()(null===(a=t.lastMessage)||void 0===a?void 0:a.time).format("HH:mm"),s=!Object(i.c)((function(e){return e.contacts.loading}))&&"contact-hover";return c.a.createElement(T.b,{to:"/".concat(t._id),activeClassName:"bgc-white",className:"contact "+s},c.a.createElement("div",{className:"avatar"},null===t||void 0===t?void 0:t.fullname[0],c.a.createElement(I,{contact:t})),c.a.createElement("div",{className:"name-mess"},c.a.createElement("div",{className:"name"},t.fullname),c.a.createElement(M,{lastMessage:t.lastMessage})),c.a.createElement("div",{className:"time-last-message"},n))},J=t(18),P=t.n(J);t(64);var U=function(){return c.a.createElement("div",{className:"contact"},c.a.createElement("div",{className:"circle-preloader"},c.a.createElement(P.a,{circle:!0,height:50,width:50})),c.a.createElement("div",{className:"name-mess"},c.a.createElement("div",{className:"name"},c.a.createElement(P.a,null)),c.a.createElement("div",{className:"mess"},c.a.createElement(P.a,null))),c.a.createElement("div",{className:"time"}))};t(66);var z=function(){var e=Object(i.c)((function(e){return e.contacts.loading})),a=Object(i.c)((function(e){var a=e.contacts.enteredText;return e.contacts.items.filter((function(e){return-1!==e.fullname.toLowerCase().indexOf(a.toLowerCase())}))})),t=new Array(7).fill().map((function(e,a){return c.a.createElement(U,{key:a})}));return c.a.createElement("div",{className:"recent-chats"},e?t:a.map((function(e){return c.a.createElement(A,{key:e._id,contact:e})})))};t(67);var D=function(){var e=Object(i.c)((function(e){return e.contacts.enteredText})),a=Object(i.b)();return c.a.createElement("div",{className:"search-contact"},c.a.createElement("input",{className:"input-search-contact",placeholder:"Search contact",value:e,onChange:function(e){a({type:"contact/search/set",payload:e.target.value})}}),c.a.createElement("span",{className:"icon-search-sidebar material-icons"},"search"))};t(68);var F=function(){return c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"inner"},c.a.createElement(D,null),c.a.createElement(z,null)))};t(69);var K=function(){var e=Object(i.b)();return Object(n.useEffect)((function(){e((function(e){e({type:"contacts/load/start"}),fetch("https://api.intocode.ru:8001/api/contacts").then((function(e){return e.json()})).then((function(a){e({type:"contacts/load/success",payload:a})}))})),e((function(e){e({type:"profile/load/start"}),fetch("https://api.intocode.ru:8001/api/profile").then((function(e){return e.json()})).then((function(a){e({type:"profile/load/success",payload:a})}))}))}),[e]),c.a.createElement("div",{className:"app"},c.a.createElement(l.c,null,c.a.createElement(l.a,{path:"/:id?"},c.a.createElement(F,null),c.a.createElement(H,null),c.a.createElement(d,null))))},W=t(13),q=t(29),G=t(30),Q=t(2),R={_id:null,loading:!0};var V={loading:!0,items:[],enteredText:""};var X=t(31),Y={loading:!0,messages:[],showSearch:!1,searchLine:"",messageLine:"",showBar:!1,waitingMessage:!0};var Z={showChat:!0};var $=Object(W.c)({profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"profile/load/start":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!0});case"profile/load/success":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!1,_id:a.payload._id});default:return e}},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"contacts/load/start":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!0});case"contacts/load/success":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!1,items:a.payload});case"contact/search/set":return Object(Q.a)(Object(Q.a)({},e),{},{enteredText:a.payload});default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"chat/load/start":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!0});case"chat/load/success":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!1,messages:a.payload});case"search/show":return Object(Q.a)(Object(Q.a)({},e),{},{showSearch:!e.showSearch});case"search/line":return Object(Q.a)(Object(Q.a)({},e),{},{searchLine:a.payload});case"input/clear":return Object(Q.a)(Object(Q.a)({},e),{},{searchLine:""});case"message/write":return Object(Q.a)(Object(Q.a)({},e),{},{messageLine:a.payload});case"bar/show":return Object(Q.a)(Object(Q.a)({},e),{},{showBar:!e.showBar});case"message/send/start":return Object(Q.a)(Object(Q.a)({},e),{},{waitingMessage:!0});case"message/send/success":return Object(Q.a)(Object(Q.a)({},e),{},{waitingMessage:!1,messages:[].concat(Object(X.a)(e.messages),[a.payload]),messageLine:""});default:return e}},application:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"chat/load/start":return Object(Q.a)(Object(Q.a)({},e),{},{showChat:!1});default:return e}}}),ee=Object(G.createLogger)({collapsed:!0,diff:!0}),ae=Object(W.d)($,Object(W.a)(q.a,ee));t(70),t(71);r.a.render(c.a.createElement(i.a,{store:ae},c.a.createElement(T.a,null,c.a.createElement(K,null))),document.getElementById("root"))}]),[[72,1,2]]]);
//# sourceMappingURL=main.f605c4c8.chunk.js.map